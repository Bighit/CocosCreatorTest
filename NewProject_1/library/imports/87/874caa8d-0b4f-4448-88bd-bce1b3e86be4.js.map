{"version":3,"sources":["../../../../assets/Script/assets/Script/LeanCloud.js"],"names":["APP_ID","APP_KEY","AV","require","init","appId","appKey","Query","User","LCFormula","Object","extend","LCItems","LCUserShop","LCShopItems","LCShop","LCManager","cc","Class","properties","userInfo","statics","_instance","share","login","userName","password","callback","logIn","then","log","object","get","error","register","user","setUsername","setPassword","signUp","queryWithObjectName","objectName","paramsData","shouldHasUserInfo","query","equalTo","include","find","createShop","shopName","shop","userShop","set","save","console","id","addItemsForShop","itemsArray","items","forEach","shopItem","element","push","saveAll"],"mappings":"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","file":"LeanCloud.js","sourceRoot":"../../../../assets/Script","sourcesContent":["\nvar APP_ID = 'haQthfxcyIKxeKdG8KnLPyw2-gzGzoHsz';\nvar APP_KEY = 'rE9jqmR7pJjUr4p6J3umSGhR';\nvar AV = require('leancloud-storage');\nAV.init({\n    appId: APP_ID,\n    appKey: APP_KEY\n});\nvar { Query, User } = AV;\nvar LCFormula = AV.Object.extend('Formula');\nvar LCItems = AV.Object.extend('Items');//name type desc level price itemid\nvar LCUserShop = AV.Object.extend('re_UserShop'); // shop user shopname\nvar LCShopItems = AV.Object.extend('re_ShopItems');// userShop item\nvar LCShop = AV.Object.extend('Shop');\n\n\nvar LCManager = cc.Class({\n    properties: {\n        userInfo: null,\n    },\n    statics: {\n        _instance: LCManager,\n        share () {\n            if (!this._instance) {\n                this._instance = new LCManager();\n            }\n            return this._instance;\n        }\n    },\n    login(userName, password, callback)  {\n\n        User.logIn(userName, password).then(object => {\n            cc.log(object.get('username') + '登陆成功');\n            LCManager.share().userInfo = object;\n            callback(true, object);\n        }, function (error) {\n            cc.log(error);\n            callback(false, error);\n\n        });\n    },\n    register(userName, password, callback)  {\n        var user = new User();\n        user.setUsername(userName);\n        user.setPassword(password);\n        user.signUp().then(object => {\n            cc.log(object.get('username') + '注册成功');\n            callback(true, object);\n        }, function (error) {\n            cc.log(error);\n            callback(false, error);\n        }\n        );\n    },\n    queryWithObjectName (objectName, paramsData, shouldHasUserInfo, callback) {\n        var query = new Query(objectName);\n\n        if (shouldHasUserInfo) {\n            query.equalTo('user', LCManager.share().userInfo);\n            query.include('user');\n        } else {\n            // query.equalTo('')\n        }\n        query.find().then(object => {\n            cc.log(objectName + object);\n            callback(true, object);\n        }, function (error) {\n            cc.log(error);\n            callback(false, error);\n        });\n    },\n    createShop(shopName, shop, callback) {\n        var userShop = new LCUserShop();\n        // 设置名称\n        userShop.set('shopName', shopName);\n        userShop.set('shop', shop);\n        userShop.set('user', LCManager.share().userInfo);\n        userShop.save().then(object => {\n            console.log('objectId is ' + object.id);\n            callback(true, object);\n        }, function (error) {\n            console.error(error);\n            callback(false, error);\n        });\n    },\n    addItemsForShop (itemsArray, userShop, callback) {\n\n        var items = [];\n        itemsArray.forEach(element => {\n            var shopItem = new LCShopItems();\n            shopItem.set('userShop', userShop);\n            shopItem.set('item', element);\n            items.push(shopItem);\n        });\n        AV.Object.saveAll(items).then(object => {\n            callback(true, object);\n        }, function (error) {\n            callback(false, error);\n        });\n    }\n\n});\nexport default { AV, LCManager };\n"]}